<sub-nav [requestUsername]="requestUsername" [tab]="1"></sub-nav>
<div class="container">
  <div class="panel panel-info">
    <div class="panel-heading">
      <div *ngIf="authorizationService.currentUser.username != requestUsername">
        <h3 class="panel-title">文章</h3>
      </div>
      <div *ngIf="authorizationService.currentUser.username == requestUsername">
        <button [class.hidden]="isShow" class="btn btn-default" (click)="changeBtn()" type="button">写文章</button>
        <button [class.hidden]="!isShow" class="btn btn-default" (click)="changeBtn()" type="button">取消</button>
      </div>
    </div>

    <div [class.hidden]="!isShow" class="panel-body">
      <div *ngIf="showMsg" class="alert alert-danger">{{sysMsg}}</div>
      <div *ngIf="showSuccess" class="alert alert-success">{{successMsg}}</div>
      <span style="font-weight: bolder;">文章类型：</span>
      <article-nav [sysDefaultTypes]="sysDefaultTypes" [definedTypes]="definedTypes"
                    (onSelectType)="onSelectType($event)"
                    (onDeleteType)="onDeleteType($event)" (onCreateType)="onCreateType($event)"
                    (onDrafts)="onDrafts($event)"></article-nav>

      <span style="font-weight: bolder;">标题：</span>
      <div class="well well-sm form-inline">
        <div class="input-group col-md-12 col-lg-12 col-sm-12 col-xs-12">
          <input style="border-radius:5px;" [(ngModel)]="globalArticleTitle" name="articleTitle" class="form-control" maxlength="50"  type="text" placeholder="输入文章标题">
        </div>
      </div>

      <div>
        <span style="font-weight:bolder;">内容:</span>
        <tinymce-editor [elementId]="tinymceElementId" required
                        (onEditorContentChange)="onEditorContentChange($event)"></tinymce-editor>
      </div>
      <div class="div-to-hide-hr"></div>
      <div class="form-inline" *ngIf="isShowPublish">
        <div (click)="saveDrafts()" class="well well-sm col-lg-6 col-md-6 col-sm-6 col-xs-6 text-center shou">
          <span style="color: #8a6d3b;">保存为草稿</span>
        </div>
        <div (click)="submitArticle()" class="well well-sm col-lg-6 col-md-6 col-sm-6 col-xs-6 text-center shou"
             style="float: right;">
          <span style="color: #2b669a;">发&nbsp;&nbsp;表</span>
        </div>
      </div>
      <div class="div-to-hide-hr"></div>
      <div *ngIf="showMsg" class="alert alert-danger">{{sysMsg}}</div>
    </div>

    <div class="panel-body" *ngIf="!isShow">
      <div *ngIf="showMsg" class="alert alert-danger">{{sysMsg}}</div>
      <div [class.hidden]="paging.bigTotalItems > 0">
        <p>
          暂无文章........
        </p>
      </div>

      <div [class.hidden]="paging.bigTotalItems < 0">
        <div class="" *ngFor="let article of articles">
          <div>
            <div style="float: left; margin-right: 10px;"><img style="width:50px; height: 50px;" class="img-circle"
                                                               [src]="head_portrait"/></div>
            <div style="padding-top: 8px;"><span>{{article.username}}</span></div>
            <div><span>{{article.update_time | date: "yyyy-MM-dd HH:mm:ss"}}</span></div>
          </div>
          <div class="div-to-hide-hr"></div>
          <div>{{article.content}}</div>
        </div>
      </div>
      <div *ngIf="(paging.bigTotalItems > 0)"
           class="visible-lg visible-md visible-sm col-lg-offset-3 col-md-offset-3 col-sm-offset-2 col-lg-6 col-md-6 col-sm-8 col-xs-12">
        <pagination [firstText]="paging.firstText" [previousText]="paging.previousText" [lastText]="paging.lastText"
                    [nextText]="paging.nextText" [totalItems]="paging.bigTotalItems" [(ngModel)]="paging.bigCurrentPage"
                    [maxSize]="paging.maxSize" class="pagination-sm" [boundaryLinks]="true" [rotate]="false"
                    [itemsPerPage]="paging.limit"
                    (numPages)="paging.numPages = $event" (pageChanged)="pageChanged($event)"></pagination>
      </div>
      <div *ngIf="(paging.bigTotalItems > 0)" class="visible-xs col-xs-12">
        <pagination [previousText]="paging.previousText"
                    [nextText]="paging.nextText"
                    [totalItems]="paging.bigTotalItems"
                    [(ngModel)]="paging.bigCurrentPage"
                    [maxSize]="paging.xsV" class="pagination-sm"
                    [boundaryLinks]="false" [rotate]="false"
                    [itemsPerPage]="paging.limit"
                    (numPages)="paging.numPages = $event"
                    (pageChanged)="pageChanged($event)"></pagination>
      </div>
    </div>
  </div>
</div>

